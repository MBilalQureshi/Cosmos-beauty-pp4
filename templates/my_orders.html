{% extends "base.html" %}
{% block title %}CosmosBeauty | My Orders{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            {% if get_products %}
            {% for product_key,product_value in get_products.items %}
                <h2>Order No: {{ product_key }}</h2>
                <a href="#">Remove Order</a>
                <table class="table">
                    <thead>
                      <tr>
                        <!-- <th scope="col">#</th> -->
                        <th scope="col">Image</th>
                        <th scope="col">Name</th>
                        <!-- TASK if user add same products make sure its max 10 in 1 order -->
                        <th scope="col">Quantity</th>
                        <th scope="col">Total</th>
                        <th scope="col">Update/Remove Item</th>
                      </tr>
                    </thead>
                {% for product in product_value %}
                    <tbody>
                      <tr>
                        <td>
                            {% if "placeholder" in product.1.url %}
                            <img src="https://images.pexels.com/photos/1926620/pexels-photo-1926620.jpeg" class="rounded-start p-3" alt="Placeholder Image" style="max-width: 100px; max-height: 100px;">
                            {% else %}
                            <img src="{{ product.1.url }}" class="rounded-start p-3 img-fluid" alt="Product image" style="max-width: 100px; max-height: 100px;">                           
                            {% endif %}
                        </td>
                        <td>{{ product.2 }}</td>
                        <form method="POST" id="quantity-update">
                            {% csrf_token %}
                            <td><input type="number" id="quantity" name="quantity" min="1" max="10" value="{{ product.3 }}"></td>
                        </form>
                        <td>{{ product.4 }}</td>
                        <td><button type="submit" form="quantity-update">Update</button> <button id="item-remove">Remove</button></td>
                      </tr>
                    </tbody>
                   
                {% endfor %}
            </table>
            <div>
                <button>Add products to this oder</button>
                <!-- TASK ASK IF SURE TO DELETE -->
                <!-- tASK MANAGE PRODUCTS IN STOCK ON DELETE -->
                <a href="/cancel-order/{{ product_key }}">Cancel this oder</a>
            </div>
            {% endfor %}    
            {% else %}
            <div>
                <p>
                    No orders available.
                </p>
            </div>
            {% endif %}
            <!-- <div>
                <a href="#" class="btn btn-default btn-number">Cancel this order</a>
            </div> -->
        </div>
    </div>
</div>
{% endblock %}